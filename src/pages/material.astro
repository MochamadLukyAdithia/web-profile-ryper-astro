---
import { i } from 'motion/react-client';
import MainLayout from '../layouts/MainLayout.astro';
import '../styles/global.css';
import BlogHero from '@/features/blogs/components/BlogHero.astro';

let materiData = [];

try {
  const res = await fetch("");
  const json = await res.json();
  materiData = json.data || [];
} catch (error) {
  console.error("Gagal fetch data materi:", error);
}
---

<MainLayout>
  <main class="g min-h-screen  bg-gray-900">
    <div class="content-wrapper ">
      <BlogHero title="MATERIAL" />
      <h1 class="text-3xl font-bold mb-6 text-center">Daftar Materi Praktikum</h1>

      {materiData.length > 0 ? (
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {materiData.map((item: any) => (
            <div class="bg-gray-800 rounded-2xl p-5 shadow-lg hover:shadow-xl transition duration-300">
              <h2 class="text-xl font-semibold mb-2">{item.judul}</h2>
              <p class="text-gray-300 text-sm mb-4">{item.deskripsi}</p>
              <a
                href={"/material/" + item.id_materi}
                class="inline-block mt-2 text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition"
                target="_blank"
              >
                Lihat Materi
              </a>
              <p class="mt-3 text-xs text-gray-400">
                Dibuat: {new Date(item.createdAt).toLocaleDateString('id-ID')}
              </p>
            </div>
          ))}
        </div>
      ) : (
        <div class="text-center py-10 text-gray-400">
          Belum ada data materi yang dibuat.
        </div>
      )}
    </div>
  </main>
</MainLayout>
